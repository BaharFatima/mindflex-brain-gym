<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Edit Deck</title>
<style>
  *{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}
  html,body{height:100%;background:linear-gradient(135deg,#dceeff,#a6d9ff);
            display:flex;align-items:center;justify-content:center;}
  .app{width:320px;height:640px;background:#f0f7ff;border-radius:25px;
       box-shadow:0 10px 25px rgba(0,80,160,0.2);overflow:hidden;
       display:flex;flex-direction:column;position:relative;}
  header{background:#e6f3ff;padding:15px 20px;display:flex;
         justify-content:space-between;align-items:center;color:#003366;}
  main{flex:1;padding:20px;text-align:center;overflow-y:auto;}
  input{width:100%;padding:8px;border-radius:8px;border:1px solid #aacfff;
        margin-bottom:10px;}
  button{background:#0077cc;color:white;border:none;border-radius:8px;
         padding:8px 15px;cursor:pointer;}
  .qa-item{background:#a3d5ff;margin:8px 0;padding:10px;border-radius:8px;
           color:#003366;display:flex;justify-content:space-between;align-items:center;}
  .qa-text{flex:1;text-align:left;}
  .delete-btn{background:#e53935;color:white;border:none;border-radius:8px;
              padding:5px 10px;margin-left:8px;cursor:pointer;}
</style>
</head>
<body>
  <div class="app">
    <header>
      <a href="flashcardMenu.html" style="text-decoration:none;color:#003366;font-size:1.4rem;">‚Üê</a>
      <h3>Edit Deck</h3>
      <div></div>
    </header>

    <main>
      <input id="deckName" placeholder="Deck Name" />
      <input id="question" placeholder="Question" />
      <input id="answer" placeholder="Answer" />
      <button onclick="addQA()">Add Card</button>
      <div id="qaList"></div>
      <button style="margin-top:15px;background:#00bcd4;" onclick="saveDeck()">Save Changes</button>
      <button style="margin-top:10px;background:#f44336;" onclick="deleteDeck()">Delete Deck</button>
    </main>
  </div>

<script>
let decks = JSON.parse(localStorage.getItem('customDecks') || '[]');
const index = localStorage.getItem('editDeckIndex');
let currentDeck = decks[index] || {name:'', cards:[]};

document.getElementById('deckName').value = currentDeck.name;
let cards = [...currentDeck.cards];
renderList();

function renderList(){
  const list=document.getElementById('qaList');
  list.innerHTML='';
  cards.forEach((c,i)=>{
    const item=document.createElement('div');
    item.className='qa-item';
    item.innerHTML=`<div class="qa-text"><b>Q:</b> ${c.q}<br><b>A:</b> ${c.a}</div>`;
    const del=document.createElement('button');
    del.textContent='üóëÔ∏è';
    del.className='delete-btn';
    del.onclick=()=>{cards.splice(i,1);renderList();};
    item.appendChild(del);
    list.appendChild(item);
  });
}

function addQA(){
  const q=document.getElementById('question').value.trim();
  const a=document.getElementById('answer').value.trim();
  if(!q||!a) return alert('Please fill both fields!');
  cards.push({q,a});
  document.getElementById('question').value='';
  document.getElementById('answer').value='';
  renderList();
}

function saveDeck(){
  const name=document.getElementById('deckName').value.trim();
  if(!name||cards.length===0) return alert('Add a name and at least one card.');
  decks[index]={name,cards};
  localStorage.setItem('customDecks',JSON.stringify(decks));
  alert('Deck updated!');
  window.location.href='flashcardMenu.html';
}

function deleteDeck(){
  if(confirm('Delete this deck?')){
    decks.splice(index,1);
    localStorage.setItem('customDecks',JSON.stringify(decks));
    alert('Deck deleted.');
    window.location.href='flashcardMenu.html';
  }
}
</script>
</body>
</html>
